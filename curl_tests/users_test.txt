REM	curl test script of UGNM service. 
REM	
REM	Tests resources /users and /users/<mail> including all supported HTTP operations
REM	and all possible responses. Unsupported operations are not explicitly tested.


REM get all users
curl http://localhost:8080/ugnm-service/resources/users/ -v -X GET

REM create new user "Hansi"
curl http://localhost:8080/ugnm-service/resources/users -v -X POST -H "Content-Type: application/json" -d "{'email':'hansi.hausburg@rwth-aachen.de','username':'Hansi','password':'pazzword','name':'Hans Hausburg'}"

REM try to create new user "Hansi" again. Should result in conflict.
curl http://localhost:8080/ugnm-service/resources/users -v -X POST -H "Content-Type: application/json" -d "{'email':'hansi.hausburg@rwth-aachen.de','username':'Hansi','password':'pazzword','name':'Hans Hausburg'}"

REM try to create new user with missing parameter.
curl -v -X PUT http://localhost:8080/ugnm-service/resources/users/ -H "Content-Type: application/json" -d "{'email':'hansi.hausburg@rwth-aachen.de'}"

REM get non-existing user
curl http://localhost:8080/ugnm-service/resources/users/idonotexist -v -X GET

REM get data of user "Hansi"
curl http://localhost:8080/ugnm-service/resources/users/hansi.hausburg@rwth-aachen.de -v -X GET

REM update data of user "Hansi" without authorization.
curl http://localhost:8080/ugnm-service/resources/users/hansi.hausburg@rwth-aachen.de -v -X PUT -H "Content-Type: application/json" -d "{'username':'Hansi69'}"

REM update data of user "Hansi" without data.
curl http://localhost:8080/ugnm-service/resources/users/hansi.hausburg@rwth-aachen.de -v -X PUT -H "Content-Type: application/json" -d "{}" --user hansi.hausburg@rwth-aachen.de:pazzword

REM update data of user "Hansi"
curl http://localhost:8080/ugnm-service/resources/users/hansi.hausburg@rwth-aachen.de -v -X PUT -H "Content-Type: application/json" -d "{'username':'Hammel'}" --user hansi.hausburg@rwth-aachen.de:pazzword

REM get updated data of user "Hansi"
curl http://localhost:8080/ugnm-service/resources/users/hansi.hausburg@rwth-aachen.de -v -X GET

REM update data of non-existing user
curl http://localhost:8080/ugnm-service/resources/users/idnotexist -v -X PUT -H "Content-Type: application/json" -d "{'username':'Ido Notexist'}" --user ido:notexist

REM delete user "Hansi" - case Unauthorized
curl http://localhost:8080/ugnm-service/resources/users/hansi.hausburg@rwth-aachen.de -v -X DELETE --user hansi.hausburg@rwth-aachen.de:falsch

REM delete user "Hansi" - success
curl http://localhost:8080/ugnm-service/resources/users/hansi.hausburg@rwth-aachen.de -v -X DELETE --user hansi.hausburg@rwth-aachen.de:pazzword

REM delete non-existing user "Hansi" (was deleted before)
curl http://localhost:8080/ugnm-service/resources/users/hansi.hausburg@rwth-aachen.de -v -X DELETE --user hansi.hausburg@rwth-aachen.de:pazzword