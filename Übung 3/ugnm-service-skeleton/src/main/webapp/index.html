<html>
<head>

	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" type="text/css" media="all" />
	<link rel="stylesheet" href="./css/jquery.tooltip.css" type="text/css" media="all" />
	<style type="text/css">
	
	
		a:link {text-decoration:none}
		a:visited {text-decoration:none}
		a:hover {text-decoration:none}
		a:active {text-decoration:none}
		a:focus {text-decoration:none}
	
		* { 
			color: black; 
			font-family: Verdana;
			sans-serif; 
		}
		
		body { font: 1em "Trebuchet MS", verdana, arial, sans-serif; font-size: 70%; }
		input, textarea { font-family: Arial; font-size: 125%; padding: 7px; }
		label { display: block; } 

		.infiniteCarousel {
		  width: 395px;
		  position: relative;
		}

		.infiniteCarousel .wrapper {
		  width: 315px; /* .infiniteCarousel width - (.wrapper margin-left + .wrapper margin-right) */
		  overflow: auto;
		  min-height: 10em;
		  margin: 0 40px;
		  position: absolute;
		  top: 0;
		}

		.infiniteCarousel ul img {
		  border: 5px solid #000;
		  -moz-border-radius: 5px;
		  -webkit-border-radius: 5px;
		  
		}

		.infiniteCarousel .wrapper ul {
		  width: 9999px;
		  list-style-image:none;
		  list-style-position:outside;
		  list-style-type:none;
		  margin:0;
		  padding:0;
		  position: absolute;
		  top: 0;
		}

		.infiniteCarousel ul li {
		  display:block;
		  float:left;
		  padding: 10px;
		  height: 85px;
		  width: 85px;
		}

		.infiniteCarousel ul li img {
		  display:block;
		}

		.infiniteCarousel .arrow {
		  display: block;
		  height: 37px;
		  width: 36px;
		  background: url(media/arrow1.jpg) no-repeat 0 0;
		  position: absolute;
		  top: 37px;
		  cursor: pointer;
		}

		.infiniteCarousel .forward {
		  background-position: 0 0;
		  right: 0;
		}

		.infiniteCarousel .back {
		  background-position: 0 -72px;
		  left: 0;
		}

		.infiniteCarousel .forward:hover {
		  background-position: 0 -36px;
		}

		.infiniteCarousel .back:hover {
		  background-position: 0 -108px;
		}
		
		
		#users {
		}
		
		#rate-image {
			height: 300px;
			padding-bottom: 10px;
			border-bottom:1px solid rgb(195,195,195);
		}
		
		#media {                
              text-align: center; 
			padding-bottom: 15px;
        }
		
		#trueFakeb { 
			padding-top: 9%;
			margin-left: 45%;
			position:absolute;
			font-size: 12pt;
        }
		
		#profile {
			padding-bottom: 10px;
			border-bottom:1px solid rgb(195,195,195);
			padding-top: 10px;
			border-top:1px solid rgb(195,195,195);
			font-size: 12pt;
		}
		
		#game {
			width: 50%;
			high: 75%;
			margin-left: auto;
			margin-right: auto;
			padding-bottom: 10px;
			padding-top: 10px;
			font-size: 9pt;
		}
		
		#topField { 
			margin-left: auto;
			margin-right: auto;
			width:98%;
			padding-bottom: 25px;
			padding-top: 15px;
            text-align: center;
			
        }
		
		#bottomField { 
			margin-left: auto;
			margin-right: auto;
			width:98%;
			position: absolute;
			top: 630px;
			border-top:1px solid rgb(195,195,195);
			font-size: 9pt;
		
        }
		
		#rightField { 
			width: 25%;
			position: absolute;
			top: 210px;
			right: 20px;
			font-size: 12pt;
			
                   
        }
		
		#rightFieldP { 
			width: 25%;
			position: absolute;
			top: 210px;
			right: 20px;
			font-size: 12pt;
			
                   
        }
		
		#panties{
			position: absolute;
			float:right;
			top: 550px;
			padding-bottom: 10px;
			margin-left: 90%;
		}
		
		#copyright{
			float:left;
			font-size: 7pt;
			padding-top: 10px;
		}
		
		#footnotes{
			position: absolute;
			float:right;
			font-size: 7pt;
			padding-top: 10px;
			margin-left: 90%;
		}
		
		#mainpage { 
			
			width:98%;
			
        }
		
		#loggedinpage { 
			
			width:98%;
			
        }
		
		#pantieMain1 {
			position: absolute;
			margin-left: 33%;
			top: 310px;
		}
		
		#pantieMain2 {
			position: absolute;
			margin-left: 8%;
			float:left;
			top: 510px;
			padding-bottom: 10px;
		}
		
		#arrowRegi {
			position: absolute;
			margin-left: 10%;
		}
		
		#arrowHaF {
			position: absolute;
			top: 450px;
			margin-left: 88%;
		}
		
		#textArrow1 {
			position: absolute;
			top: 430px;
			margin-left: 87%;
			font-size: 12pt;
		}
		
		#textArrow {
			position: absolute;
			padding-top: 45px;
			margin-left: 17%;
			font-size: 12pt;
		}
		
		#textWelcome {
			position: absolute;
			padding-top: 250px;
			margin-left: 5%;
			font-size: 16pt;
		}
		
		#textDesc {
			position: absolute;
			padding-top: 190px;
			margin-left: 40%;
		}
		
		#arrowGame {
			position: absolute;
			
		}
		
		#pantieMulti {
			position: absolute;
			top: 150px;
			margin-left: 3%;
			font-size: 14pt;
		}
		
		
		#textArrowGame {
			position: absolute;
			padding-top: 27px;
			margin-left: 8%;
			font-size: 12pt;
		}
		
		
		#arrowTop {
			position: absolute;
			padding-top: 190px;
			margin-left: 57%;
		}
		
		#pantieKing {
			position: absolute;
			padding-top: 120px;
			margin-left: 25%;
		}
		
		#texttoplist {
			position: absolute;
			padding-top: 250px;
			margin-left: 5%;
			font-size: 16pt;
		}
		
		#name{
		float:right;
		position: relative;
		text-align: center;
		padding-top: 1%;
		top: 10%;
		font-size: 14pt;
		color: #9000A1;
	
		}
		
		#textProfile{
		padding-top: 340px;
		margin-left: 5%;
		font-size: 16pt;
		text-align:center;
			
		}
		
		#arrow1 {
			position: absolute;
			padding-top: 240px;
			margin-left: 50%;
		}
		
		#arrow2 {
			position: absolute;
			padding-top: 230px;
			margin-left: 37%;
			
		}
		
		#arrow3 {
			position: absolute;
			padding-top: 240px;
			margin-left: 60%;
			
		}
		
		 
         #yorusernameCon{
        	 position: absolute;
			padding-top: 195px;
      		margin-left: 10%;
			font-size: 12pt;
         }
         
         #yourname2Con{
        	position: absolute;
  			padding-top: 170px;
         	margin-left: 10%;
			font-size: 12pt;
        	
         }
         
         #yourEpCon{
        	position: absolute;
        	padding-top: 180px;
 			margin-left: 45%;
 			font-size: 12pt;
        	
         }
         
         #profilepage{
        	 font-size: 12pt;
  		
        	 
         }
		
	</style>
	
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
	<script type="text/javascript" src="./javascript/jquery.base64.js"></script>
	<script type="text/javascript" src="./javascript/jquery.tooltip.js"></script>
	<script type="text/javascript" src="./javascript/fmds.js"></script>
	
	<script type="text/javascript">
		
		var fmd;
		
		var cmedium;
		
		
		//#####################################################
		//                     Bilder "Karussell"
		//#####################################################
		$.fn.infiniteCarousel = function () {

			function repeat(str, num) {
				return new Array( num + 1 ).join( str );
			}
		  
			return this.each(function () {
				var $wrapper = $('> div', this).css('overflow', 'hidden'),
					$slider = $wrapper.find('> ul'),
					$items = $slider.find('> li'),
					$single = $items.filter(':first'),
					
					singleWidth = $single.outerWidth(), 
					visible = Math.ceil($wrapper.innerWidth() / singleWidth), // note: doesn't include padding or border
					currentPage = 1,
					pages = Math.ceil($items.length / visible);            


				// 1. Pad so that 'visible' number will always be seen, otherwise create empty items
				if (($items.length % visible) != 0) {
					$slider.append(repeat('<li class="empty" />', visible - ($items.length % visible)));
					$items = $slider.find('> li');
				}

				// 2. Top and tail the list with 'visible' number of items, top has the last section, and tail has the first
				$items.filter(':first').before($items.slice(- visible).clone().addClass('cloned'));
				$items.filter(':last').after($items.slice(0, visible).clone().addClass('cloned'));
				$items = $slider.find('> li'); // reselect
				
				// 3. Set the left position to the first 'real' item
				$wrapper.scrollLeft(singleWidth * visible);
				
				// 4. paging function
				function gotoPage(page) {
					var dir = page < currentPage ? -1 : 1,
						n = Math.abs(currentPage - page),
						left = singleWidth * dir * visible * n;
					
					$wrapper.filter(':not(:animated)').animate({
						scrollLeft : '+=' + left
					}, 500, function () {
						if (page == 0) {
							$wrapper.scrollLeft(singleWidth * visible * pages);
							page = pages;
						} else if (page > pages) {
							$wrapper.scrollLeft(singleWidth * visible);
							// reset back to start position
							page = 1;
						} 

						currentPage = page;
					});                
					
					return false;
				}
				
				$wrapper.after('<a class="arrow back">&lt;</a><a class="arrow forward">&gt;</a>');
				
				// 5. Bind to the forward and back buttons
				$('a.back', this).click(function () {
					return gotoPage(currentPage - 1);                
				});
				
				$('a.forward', this).click(function () {
					return gotoPage(currentPage + 1);
				});
				
				// create a public interface to move to a specific page
				$(this).bind('goto', function (event, page) {
					gotoPage(page);
				});
			});  
		};
		
		
		//#####################################################
		//                     Update Users
		//#####################################################
		function updateUsers() {
			fmd.getUsers(function(users){
				var ol = $("<ol></ol>").attr({"id":"userlist"});
				for(i in users){
					var uri = users[i];
					fmd.getUserUri(uri, function(object){
					var li =  $("<li></li>").append("<span><b>" + object.ep + " EP</b></span> - <span>" + object.username + "</span>");
					ol.append(li);
					});
					}
				$("#users").html(ol);
			});
		}
		
		//#####################################################
		//                     Update Media
		//#####################################################
		function updateMedia() {
			fmd.getMedia(function(media){
				var ul = $("<ul></ul>");
				var ct = 0;
				for(i in media){
					var uri = media[i];
					
					fmd.getMediumUri(uri,function(object){
					
						var titleValue = "\nDescription: " + object.description;
						
						var count = media.length;
						var realCount = 0;
						
						
						console.log(titleValue);
						
						var li =  $("<li></li>").append("<div title='" + titleValue + "'><img src='" + object.url + "' width='75' alt='" + titleValue + "' /></div>").click(function(){		
							cmedium = object;
							$("#rate-image").html("<img src='" + object.url + "' height='300' alt='" + titleValue + "' />");
						});
						ul.append(li);
						
						if(ct == media.length-1){
							$("#medialist").html(ul);
							$('.infiniteCarousel').infiniteCarousel();
						}
						ct++;
						console.log("============================================================");
					});
				
				}
				
			});
		}
		//#####################################################
		//                     Update Collects
		//#####################################################
		function updateCollects() {
			fmd.getCollects(function(collecturi){
				var ol = $("<ol></ol>").attr({"id":"userlist"});
				for(i in collecturi){
					var uri = collecturi[i];
					fmd.getCollectUri(uri, function(achieveUri){
						var achieveUriNew = achieveUri;
						fmd.getAchievementUri(achieveUriNew, function(achievement){
							li =  $("<li></li>").append("<span><b>" + achievement.name + "</b></span><br><span>Describtion: " + achievement.description + "</span>");
						 	ol.append(li);
						});
					});
				}
				$("#collects").html(ol);
			});
		}
				
		
		//#####################################################
		//        jQuery show und hide Buttons 
		//#####################################################
		function updateToplist(){			
			$("#username").html(fmd._uname + " | EP: " + fmd._uep);
			$("#rightFieldP").hide();
			$("#loginb").hide();
			$("#rightField").show();
			$("#logoutb").show();
			$("#toplistb").hide(); 
			$("#registerb").hide();
		    $("#trueb").hide();                             
            $("#fakeb").hide();
            $("#profileb").show();
            $("#gameb").show();
            $("#editb").hide();
            $("#deleteb").hide();
            $("#rate-image").hide();   
            $("#mainpage").hide();
            $("#loggedinpage").hide();
            $("#toplistpage").show();
            $("#profilepage").hide();
            $("#game").hide(); 
            $("#media").hide();
            $("#help1b").hide();
            $("#help2b").hide();
            $("#help3b").hide();	
            $("#help4b").hide();
            $("#help5b").show();

          
	}
		
		function updateUser(){			
			$("#username").html(fmd._uname + " | EP: " + fmd._uep);
			$("#usernameP").html("Welcome " + fmd._username + ".");
			$("#yourusername").html(fmd._username);
			$("#yourname2").html(fmd._uname);
			$("#yourEp").html(fmd._uep);
			$("#yorusernameCon").show();
			$("#yourname2Con").show();
			$("#rightField").hide();
			$("#rightFieldP").show();
			$("#loginb").hide();
			$("#profilepage").show();
			$("#logoutb").show();
			$("#toplistb").show(); 
			$("#registerb").hide();
		    $("#trueb").hide();                             
            $("#fakeb").hide();
            $("#profileb").hide();
            $("#gameb").show();
            $("#editb").show();
            $("#deleteb").show();
            $("#rate-image").hide();
            $("#mainpage").hide();
            $("#loggedinpage").hide();
            $("#toplistpage").hide();
            $("#game").hide(); 
            $("#media").hide();
            $("#help1b").hide();
            $("#help2b").hide();
            $("#help3b").hide();	
            $("#help4b").show();
            $("#help5b").hide();
	}
		
		function updateGame(){			
				$("#username").html(fmd._uname + " | EP: " + fmd._uep);
				$("#rightFieldP").hide();
				$("#loginb").hide();
				$("#rightField").hide();
				$("#profilepage").hide();
				$("#toplistb").show(); 
				$("#logoutb").show();
				$("#registerb").hide();
			    $("#trueb").show();                             
                $("#fakeb").show();
                $("#profileb").show();
                $("#gameb").hide();
                $("#editb").hide();
                $("#deleteb").hide();
                $("#rate-image").show();   
                $("#game").show(); 
                $("#media").show();
                $("#mainpage").hide();
                $("#loggedinpage").hide();
                $("#toplistpage").hide();
                $("#help1b").hide();
                $("#help2b").hide();
                $("#help3b").show();
                $("#help4b").hide();
                $("#help5b").hide();
		}
		
		
		function updateStatus(){
			if(fmd.isLoggedIn()){
				
				$("#username").html(fmd._uname + " | EP: " + fmd._uep);
				$("#rightFieldP").hide();
				$("#rightField").hide();
				$("#loginb").hide();
				$("#profilepage").hide();
				$("#logoutb").show();
				$("#rightField").hide();
				$("#registerb").hide();
				$("#toplistb").show(); 
			    $("#trueb").hide();                             
                $("#fakeb").hide();
                $("#profileb").show();
                $("#gameb").show();
                $("#mainpage").hide();
                $("#loggedinpage").show();
                $("#toplistpage").hide();
                $("#editb").hide();
                $("#deleteb").hide();
                $("#rate-image").hide();   
                $("#game").hide(); 
                $("#media").hide();
                $("#help1b").hide();
                $("#help2b").show();
                $("#help3b").hide();
                $("#help4b").hide();
                $("#help5b").hide();
				
			} else {
				
				$("#username").html("");
				$("#rightFieldP").hide();
				$("#toplistb").hide(); 
				$("#profilepage").hide(); 
				$("#rightField").hide();
				$("#loginb").show();
				$("#logoutb").hide();
				$("#registerb").show();
			    $("#trueb").hide();                             
                $("#fakeb").hide();
                $("#gameb").hide();
                $("#editb").hide();
                $("#deleteb").hide();
                $("#profileb").hide();
                $("#rate-image").hide();  
                $("#mainpage").show();
                $("#loggedinpage").hide();
                $("#toplistpage").hide();
                $("#game").hide(); 
                $("#media").hide();
                $("#help1b").show();
                $("#help2b").hide();
                $("#help3b").hide();
                $("#help4b").hide();
                $("#help5b").hide();
			}
		}
		
		function init() {
			
			fmd = new FmdClient("http://127.0.0.1:8080/ugnm-service/resources/");
			
			// load all users and display in a list
			updateStatus();
			//updateUsers();
			
			
			//#####################################################
			//                     Login
			//#####################################################
			$("#dialog-login" ).dialog({
				autoOpen: false,
				height: 215,
				width: 390,
				modal: true,
				buttons: {
					"Login": function() {
						
						var that = $(this);
						var bValid = true;

						bValid = bValid && checkLengthLoginMail( $("#login-email"), "email", 6, 80 );
						bValid = bValid && checkLengthLoginPass( $("#login-password"), "password", 6, 20 );
						
						if ( bValid ) {
						fmd.login(
							$("#login-email").val(),
							$("#login-password").val(),
							
							function(result){
								console.log("Login Result: " + result);
								if( result.status == "ok"){
									that.dialog("close");
									updateStatus();
								}else if( result.status == "notfound"){
									$("#login-notfound").dialog("open");
								}else if( result.status == "unauthorized"){
									$("#login-unauthorized").dialog("open");
								}
							});
						}
					},
					Cancel: function() {
						$(this).dialog("close");
					}
				}
			});
			
			$("#signup-email").focusout(function(){
				fmd.isRegistered($("#signup-email").val(),function(result){
					if(result){
						updateTips( "E-mail " + $("#signup-email").val() + " already exists!");
						$("#signup-email").addClass( "ui-state-error" );
					} else {
						updateTips( "E-mail " + $("#signup-email").val() + " available.");
						$("#signup-email").removeClass( "ui-state-error" );
					}
				});
			});
			
			
			//#####################################################
			//                 Registrierung
			//#####################################################
			$( "#dialog-signup" ).dialog({
				autoOpen: false,
				height: 400,
				width: 600,
				modal: true,
				buttons: {
					"Sign Up": function() {
					
						var that = $(this);
						var bValid = true;
						
						$("#signup-name").removeClass("ui-state-error");
						$("#signup-username").removeClass("ui-state-error");
						$("#signup-email").removeClass("ui-state-error");
						$("#signup-password").removeClass("ui-state-error");
						$("#signup-passwordRepeat").removeClass("ui-state-error");
						
						bValid = bValid && checkLength( $("#signup-name"), "name", 6, 80 );
						bValid = bValid && checkLength( $("#signup-username"), "username", 6, 80 );
						bValid = bValid && checkLength( $("#signup-email"), "email", 6, 80 );
						bValid = bValid && checkLength( $("#signup-password"), "password", 6, 20 );
						bValid = bValid && checkLength( $("#signup-passwordRepeat"), "password", 6, 20 )

						bValid = bValid && checkRegexp( $("#signup-name"), /^[A-Za-z]([A-Za-z ])+$/, "Name may consist of A-Z, a-z and spaces, and must begin with a letter." );
						bValid = bValid && checkRegexp( $("#signup-username"), /^[A-Za-z]([0-9a-zA-Z ])+$/i, "Username may consist of A-Z, a-z, 0-9, spaces and underscores, and must begin with a letter." );
						bValid = bValid && checkRegexp( $("#signup-email"), /^([A-Za-z_.])[^@]+@.+\.[^.]+$/i, "E-mail may consist of a-z, 0-9, underscores, begin with a letter." );
						bValid = bValid && checkRegexp( $("#signup-password"), /^([0-9a-zA-Z])+$/, "Password field only allow : a-z 0-9" );
						bValid = bValid && checkRegexp( $("#signup-passwordRepeat"), /^([0-9a-zA-Z])+$/, "Password field only allow : a-z 0-9" );
						bValid = bValid && checkPasswords( $("#signup-password"), $("#signup-passwordRepeat") );
						
						

						if ( bValid ) {
							
							// POST form data to resource /users
							fmd.signup( $("#signup-email").val(), $("#signup-name").val(), $("#signup-username").val(), $("#signup-password").val(), function(result){
								if(result.status == "created"){
									$("#register-success").dialog("open");
									that.dialog("close");
									updateUsers();
								} else if( result.status == "conflict"){
									updateTips( "E-mail " + $("#signup-email").val() + " already exists!");
									$("#signup-email").addClass( "ui-state-error" );
								}
							});
						}
					},
					Cancel: function() {
						$( this ).dialog( "close" );
					}
				},
				close: function() {
					updateTips( "All form fields are required.");
					$("#signup-name").removeClass("ui-state-error");
					$("#signup-username").removeClass("ui-state-error");
					$("#signup-email").removeClass("ui-state-error");
					$("#signup-password").removeClass("ui-state-error");
					$("#signup-passwordRepeat").removeClass("ui-state-error");
				}
			});
			
			
			//#####################################################
			//     Edit User
			//#####################################################
			$( "#dialog-editUser" ).dialog({
                autoOpen: false,
                height: 300,
                width: 550,
                modal: true,
                buttons: {
                        "Save": function() {
                        
                                var that = $(this);
                                var bValid = true;
                                
        						$("#update-username").removeClass("ui-state-error");
           						$("#update-password").removeClass("ui-state-error");                                
           						$("#update-passwordNew").removeClass("ui-state-error");
        						
        						bValid = bValid && checkLengthEdit( $("#update-username"), "username", 6, 80 );
        						bValid = bValid && checkLengthEdit( $("#update-password"), "password", 6, 20 );
        						bValid = bValid && checkLengthEdit( $("#update-passwordNew"), "password", 6, 20 );

        						bValid = bValid && checkRegexpEdit( $("#update-username"), /^[A-Za-z]([0-9a-zA-Z ])+$/i, "Username may consist of A-Z, a-z, 0-9, spaces and underscores, and must begin with a letter." );
        						bValid = bValid && checkRegexpEdit( $("#update-passwordNew"), /^([0-9a-zA-Z])+$/, "Password field only allow : a-z 0-9" );
                                
                                if ( bValid ) {                                                 
          
                                        fmd.updateUser( $("#update-username").val(), $("#update-password").val(), $("#update-passwordNew").val(), function(result){
                                        	 if(result.status == "ok"){
            									$("#update-success").dialog("open");
            									that.dialog("close");
            								} else if(result.status == "unauthorized"){
            									$("#update-password").addClass( "ui-state-error" );
            									updateTipsEdit( "Old password is incorrect!");
            								}
            								else if(result.status == "notacceptable"){
            									$("#update-error").dialog("open");
            								}
            							});
            						}
            					},
                        Cancel: function() {
                                $( this ).dialog( "close" );
                        }
                },
                close: function() {
					updateTipsEdit( "All form fields are required.");
					$("#update-username").removeClass("ui-state-error");
					$("#update-password").removeClass("ui-state-error");
					$("#update-passwordNew").removeClass("ui-state-error");
                }
        });
			
			//#####################################################
			//     Delete User
			//#####################################################
			$( "#dialog-deleteUser" ).dialog({
                autoOpen: false,
                height: 215,
                width: 400,
                modal: true,
                buttons: {
                        "Delete": function() {
                        
                                var that = $(this);                               
                                var bValid = true;
                                $("#delete-password").removeClass("ui-state-error");
                                bValid = bValid && checkLengthDelete( $("#delete-password"), "password", 6, 20 );
                                
                                if ( bValid ) {                                	
           						fmd.deleteUser( $("#delete-password").val(), function(result){
                                        	 if(result.status == "ok"){
                                         		fmd.logout();
                                        		$("#delete-success").dialog("open");
             									that.dialog("close");

                                        		updateUsers();
                                        		updateStatus();
                                        		
            								} else if(result.status == "unauthorized"){
            									$("#delete-password").addClass( "ui-state-error" );
            								}
            							});
                     				}
            					},
                        Cancel: function() {
                                $( this ).dialog( "close" );
                        }
                },
                close: function() {
					$("#delete-password").removeClass("ui-state-error");
                }
        });
			
			
			//#####################################################
			//     Kleinere Dialoge (wie Help, Success und Fehler)
			//#####################################################	
			$("#login-notfound" ).dialog({
                                autoOpen: false,
                                height: 215,
                                width: 300,
                                modal: true,
                                buttons: {
                                                OK: function() {
                                                        $(this).dialog("close");                                                        
                                        }
                                }
                        });
			
			$("#login-unauthorized" ).dialog({
                autoOpen: false,
                height: 215,
                width: 300,
                modal: true,
                buttons: {
                                OK: function() {
                                        $(this).dialog("close");                                                        
                        }
                }
        });
		
			
			$("#register-success" ).dialog({
                                autoOpen: false,
                                height: 215,
                                width: 300,
                                modal: true,
                                buttons: {
                                                OK: function() {
                                                        $(this).dialog("close");                                                        
                                        }
                                }
                        });
			
			$("#update-success" ).dialog({
                autoOpen: false,
                height: 215,
                width: 300,
                modal: true,
                buttons: {
                                OK: function() {
                                        $(this).dialog("close");                                                        
                        }
                }
        });
			
			$("#delete-success" ).dialog({
                autoOpen: false,
                height: 215,
                width: 300,
                modal: true,
                buttons: {
                                OK: function() {
                                        $(this).dialog("close");                                                        
                        }
                }
        });
			
			$("#update-error" ).dialog({
                autoOpen: false,
                height: 215,
                width: 300,
                modal: true,
                buttons: {
                                OK: function() {
                                        $(this).dialog("close");                                                        
                        }
                }
        });
			
			$("#dialog-help1" ).dialog({
                 autoOpen: false,
                 height: 220,
                 width: 400,
                 modal: true,
                 buttons: {
                                 OK: function() {
                                 $(this).dialog("close");
                         }
                 }
			});
			
			$("#dialog-help2" ).dialog({
                autoOpen: false,
                height: 265,
                width: 400,
                modal: true,
                buttons: {
                                OK: function() {
                                $(this).dialog("close");
                        }
                }
			});
			
			$("#dialog-help3" ).dialog({
                autoOpen: false,
                height: 410,
                width: 400,
                modal: true,
                buttons: {
                                OK: function() {
                                $(this).dialog("close");
                        }
                }
			});
			
			$("#dialog-help4" ).dialog({
                autoOpen: false,
                height: 250,
                width: 400,
                modal: true,
                buttons: {
                                OK: function() {
                                $(this).dialog("close");
                        }
                }
			});
			
			
			$("#dialog-help5" ).dialog({
                autoOpen: false,
                height: 270,
                width: 400,
                modal: true,
                buttons: {
                                OK: function() {
                                $(this).dialog("close");
                        }
                }
			});
			
			
			$("#dialog-about" ).dialog({
                autoOpen: false,
                height: 270,
                width: 400,
                modal: true,
                buttons: {
                                OK: function() {
                                $(this).dialog("close");
                        }
                }
			});
			
			$("#dialog-contact" ).dialog({
                autoOpen: false,
                height: 250,
                width: 400,
                modal: true,
                buttons: {
                                OK: function() {
                                $(this).dialog("close");
                        }
                }
			});

			

			//#####################################################
			//     				Buttons
			//#####################################################
			$( "#loginb" ).button().click(function() {
				$( "#dialog-login" ).dialog("open");
			});
			
			$( "#help1b" ).button().click(function() {
				$( "#dialog-help1" ).dialog("open");
			});
			
			$( "#help2b" ).button().click(function() {
				$( "#dialog-help2" ).dialog("open");
			});
			
			$( "#help3b" ).button().click(function() {
				$( "#dialog-help3" ).dialog("open");
			});
			
			$( "#help4b" ).button().click(function() {
				$( "#dialog-help4" ).dialog("open");
			});
			
			$( "#help5b" ).button().click(function() {
				$( "#dialog-help5" ).dialog("open");
			});
			
			$( "#registerb" ).button().click(function() {
				$( "#dialog-signup" ).dialog("open");
			});
			
			$( "#editb" ).button().click(function() {
				$( "#dialog-editUser" ).dialog("open");
			});
			
			$( "#deleteb" ).button().click(function() {
				$( "#dialog-deleteUser" ).dialog("open");
			});
			
			$( "#logoutb" ).button().click(function() {
				fmd.logout();
				updateStatus();
			});
			
			$( "#toplistb" ).button().click(function() {
				updateToplist(); //opens "toplist side"
				updateUsers();                        
			});
			
			$( "#gameb" ).button().click(function() {
                updateGame(); //opens "game side"
                updateMedia();                          
			});
			
			$( "#profileb" ).button().click(function() {
                updateUser(); //opens "user side"
                updateUserEP();
                updateCollects();
			});
			
			$( "#aboutl" ).click(function() {
				$( "#dialog-about" ).dialog("open");
			});
			
			
			$( "#fakeb" ).button().click(function() {
				console.log(cmedium.id + " is a Fake");
				fmd.rateMedium(cmedium,0,function(result){
					if(result.status == "created"){
						fmd.updateUserEP(function(result){
						});
						updateMedia();
						updateGame();
					} else {
						alert(result.status);
					}
				});
			});
			
			$( "#trueb" ).button().click(function() {
				console.log(cmedium.id + " is Authentic");
				fmd.rateMedium(cmedium,1,function(result){
					if(result.status == "created"){
						fmd.updateUserEP(function(result){
						});
						updateMedia();
						updateGame();
					} else {
						alert(result.status);
					}
				});
			});
			
		}

		//#####################################################
		// Funktionen zum Überprüfen der Login Eingaben
		//#####################################################
		function checkLengthLoginMail( o, n, min, max ) {
			if ( o.val().length > max || o.val().length < min ) {
				$("#login-notfound").dialog("open");
				return false;
			} else {
				return true;
			}
		}
		
		function checkLengthLoginPass( o, n, min, max ) {
			if ( o.val().length > max || o.val().length < min ) {
				$("#login-unauthorized").dialog("open");
				return false;
			} else {
				return true;
			}
		}
		
		//#####################################################
		//   Funktionen zum Überprüfen der Sign Up Eingaben
		//#####################################################
		function updateTips( t ) {
			$("#signup-tips").text( t ).addClass( "ui-state-highlight" );
			setTimeout(function() {
				$("#signup-tips").removeClass( "ui-state-highlight", 1500 );
			}, 500 );
		}
		
		function checkLength( o, n, min, max ) {
			if ( o.val().length > max || o.val().length < min ) {
				o.addClass( "ui-state-error" );
				updateTips( "Length of " + n + " must be between " +
					min + " and " + max + "." );
				return false;
			} else {
				return true;
			}
		}

		function checkRegexp( o, regexp, n ) {
			if ( !( regexp.test( o.val() ) ) ) {
				o.addClass( "ui-state-error" );
				updateTips( n );
				return false;
			} else {
				return true;
			}
		}
		
		function checkPasswords( o, p) {
			if ( !(o.val() == p.val() ) ) {
				p.addClass( "ui-state-error" );
				updateTips( "Passwords not equal." );
				return false;
			} else {
				return true;
			}
		}
		
		//#####################################################
		// Funktionen zum Überprüfen der Edit Profile Eingaben
		//#####################################################
		function updateTipsEdit( t ) {
			$("#editUser-tips").text( t ).addClass( "ui-state-highlight" );
			setTimeout(function() {
				$("#editUser-tips").removeClass( "ui-state-highlight", 1500 );
			}, 500 );
		}
		
		function checkLengthEdit( o, n, min, max ) {
			if ( o.val().length > max || o.val().length < min ) {
				o.addClass( "ui-state-error" );
				updateTipsEdit( "Length of " + n + " must be between " +
					min + " and " + max + "." );
				return false;
			} else {
				return true;
			}
		}

		function checkRegexpEdit( o, regexp, n ) {
			if ( !( regexp.test( o.val() ) ) ) {
				o.addClass( "ui-state-error" );
				updateTipsEdit( n );
				return false;
			} else {
				return true;
			}
		}
		//#####################################################
		// Funktion zum Überprüfen des Delete Passwords
		//#####################################################
		function checkLengthDelete( o, n, min, max ) {
			if ( o.val().length > max || o.val().length < min ) {
				o.addClass( "ui-state-error" );
				return false;
			} else {
				return true;
			}
		}
		
		$(document).ready(init);
		
	</script>
</head>






															<! ******* BODY-START + BANNER *********>


<body>


<div id="topField">
	<img id = "banner" src = "media/banner2.jpg" alt="" ></img>
</div>






															<! ******* NAVIGATION-BAR *********>







<div id="profile">
	
	<div id="name">
		<b><span id="username"></b></span>
	</div>
	
	<span id="profile-buttons">
		<button id="loginb"><b>Login</b></button>
		<button id="gameb"><b>Game</b></button>
		<button id="profileb"><b>Profile</b></button>
		<button id="editb"><b>Edit Profile</b></button>
		<button id="deleteb"><b>Delete Profile</b></button>
		<button id="registerb"><b>Sign Up</b></button>
		<button id="toplistb"><b>TopList</b></button>
		<button id="help1b"><b>Help</b></button>
		<button id="help2b"><b>Help</b></button>
		<button id="help3b"><b>Help</b></button>
		<button id="help4b"><b>Help</b></button>
		<button id="help5b"><b>Help</b></button>
		<button id="logoutb"><b>Logout</b></button>
		</b>
	</span>
	
</div>



															<! ******* PROFILE-PAGE *********>




<div id="profilepage">

	<div id="yorusernameCon">
		<font>Your Username: </font>
		<b><span id="yourusername"></b></span>
	</div>
	
	<div id="yourname2Con">
		<font>Your Full Name: </font>
		<b><span id="yourname2"></b></span>
	</div>
	
	<div id="yourEpCon">
		<font>Your EP: </font>
		<b><span id="yourEp"></b></span>
	</div>

	<div id="arrow1">
		<img id = "arrow" src = "media/arrow2.jpg" alt="" ></img>
	</div>
	
	<div id="arrow2">
		<img id = "arrow" src = "media/arrow6.jpg" alt="" ></img>
	</div>

	<div id="arrow3">
		<img id = "arrow" src = "media/arrow5.jpg" alt="" ></img>
	</div>

	<div id="textProfile">
		<b><span id="usernameP"></b></span>
	</div>
	
	<div id="rightFieldP">
		<p>Your Achievements: </p>
		<p><span id="collects"></span></p>
	</div> 
	

</div>




																<! ******* MAIN-PAGE *********>




<div id="mainpage">

	<div id="arrowHaF">
		<img id = "pantie" src = "media/arrowHaF.jpg" alt="" ></img>
	</div>

	<div id="arrowRegi">
		<img id = "arrowR" src = "media/registerA.jpg" alt="" ></img>
	</div>

	<div id="pantieMain1">
		<img id = "pantie" src = "media/pantieMain1.jpg" alt="" ></img>
		</div>

	<div id="pantieMain2">
		<img id = "pantie" src = "media/pantieMain2.jpg" alt="" ></img>
	</div>

	<div id="textWelcome">
		<b>Welcome to Fake Media Detection.</b>
	</div>
	
	<div id="textArrow">
		<b>Please Sign Up!</b>
	</div>
	
	<div id="textArrow1">
		<b>Have Fun!</b>
	</div>
	
	<div id="textDesc">
		<b>
		<p style="font-size:14">Welcome to Fake Media Detection!</p>
		</b>
		<p>blablbalbablabalbalablablabablalabalbabalbalabalbbla</p>
		<p>blablbalbablabalbalablablabablalabalbabalbalabalbbla</p>
		<p>blablbalbablabalbalablablabablalabalbabalbalabalbbla</p>
		<p>blablbalbablabalbalablablabablalabalbabalbalabalbbla</p>
		<p>blablbalbablabalbalablablabablalabalbabalbalabalbbla</p>
	</div>

</div>



															<! ******* LOGGED IN-PAGE *********>




<div id="loggedinpage">

	<div id="arrowGame">
		<img id = "arrowF" src = "media/arrowGame.jpg" alt="" ></img>
	</div>
	
	<div id="pantieMulti">
		<img id = "pantieMulti" src = "media/pantiesMulti.jpg" alt="" ></img>
	</div>
	
	<div id="textArrowGame">
		<b>Start the game and be the best!</b>
	</div>
	
	<div id="textDesc">
		<b>
		<p style="font-size:14">You think you can win?</p>
		</b>
		<p>blablbalbablabalbalablab</p>
		<p>blablbalbablabalbalablabla</p>
		<p>blablbalbablabalbala</p>
		<p>blablbalbablabalbalablabla</p>
		<p>blablbalbablabalbalabla</p>
		
	</div>

</div>

															<! ******* TOPLIST-PAGE *********>




<div id="toplistpage">

	<div id="arrowTop">
		<img id = "arrowF" src = "media/arrowTop.jpg" alt="" ></img>
	</div>
	
	<div id="pantieKing">
		<img id = "arrowF" src = "media/pantieKing.jpg" alt="" ></img>
	</div>
	
	<div id="texttoplist">
		<b>The Hall of Fame.</b>
	</div>
	
	<div id="textDesc">
		<b>
		<p style="font-size:14">Start your Game-Carrier..</p>
		</b>
		<p>blablbalbablabalbalablab</p>
		<p>blablbalbablabalbalablabla</p>
		<p>blablbalbablabalbala</p>
		<p>blablbalbablabalbalablabla</p>
		<p>blablbalbablabalbalabla</p>
		
	</div>

</div>



<div id="rightField">
	<font>Top 10 Gamer's: </font>
	<div id="users"></div>
</div> 



															<! ******* GAME-PAGE *********>


<div id="game">

	<div id="truefakeb">
		<button id="trueb"><b>TRUE</b></button>
		<p></p>
		<button id="fakeb"><b>FAKE</b></button>
	</div>
	
<center>
	<div id="rate-image"></div>
</center>

	<div id="media">
		<center>
		<div class="infiniteCarousel">
			<div id="medialist" class="wrapper"></div>
		</div>
		</center>
	</div>
	
</div>




															<! ******* FUNNY-LITTLE-DUDE-BOTTOM *********>




<div id="panties">
	<img id = "fun" src = "media/panties.jpg" alt="" ></img>
</div>


															<! ******* FOOTER *********>



<div id="bottomField">
	
	<div id="footnotes">
		<a id="aboutl" style="cursor:hand">About  - </a>
		<a id="contactl" href="mailto:sven.hausburg@rwth-aachen.de">Contact Us</a>
	</div>
	
	<div id="copyright">
	© Thomas W./ Sven H.
	</div>
</div>





																<! ******* DIALOG-BOXEN *********>






<div id="dialog-help1" title="Help">
	<p id="registrate" class="help"><b>How to registrate?!</b></p>
		<form>
			<fieldset>
				<table>
					<tr>
						<td>
							<label for="help1"><p>Please click the "Sign Up"" Button on the top of the page to create a new account.</p></label>
						</td>
					</tr>
				</table>
			</fieldset>
		</form>
</div>


<div id="dialog-help2" title="Help">
	<p id="play" class="help"><b>How to play?!</b></p>
		<form>
			<fieldset>
				<table>
					<tr>
						<td>
							<label for="help2"><p>Please click "Game" Button on the top of the page to start new game!</p><p>You have to decide whether the pictures you see are true or false.</p></label>
						</td>
					</tr>
				</table>
			</fieldset>
		</form>
</div>


<div id="dialog-help3" title="Help">
	<p id="ep" class="help"><b>How I get EP?!</b></p>
		<form>
			<fieldset>
				<table>
					<tr>
						<td>
							<label for="help3"><p>If you rate a picture correctly, you will get a small amount of EP.</p><p>There are a lot of hidden achievements in the game.</p></label>
						</td>
					</tr>
				</table>
			</fieldset>
		</form>
	
	<p id="ep" class="help"><b>How I get Achievements?!</b></p>
	<p></<p>
	<form>
		<fieldset>
			<table>
				<tr>
					<td>
						<label for="help3"><p></p>You get Achievements by reaching certain EP levels.</p><p>Can you get them all?</p></label>
					</td>
				</tr>
			</table>
		</fieldset>
	</form>
</div>



<div id="dialog-help4" title="Help">
	<p id="edit" class="help"><b>How to edit your profile?!</b></p>
		<form>
			<fieldset>
				<table>
					<tr>
						<td>
							<label for="help4"><p>Please click the "Edit Profile" Button on the top of the page.</p><p>Here you can change your usernme and your password.</p></label>
						</td>
					</tr>
				</table>
			</fieldset>
		</form>
</div>

<div id="dialog-help5" title="Help">
<p id="toplist" class="help"><b>What is the TopList?!</b></p>
	<form>
		<fieldset>
			<table>
				<tr>
					<td>
						<label for="help5"><p>The Toplist shows the leading Players of this game.</p><p>Maybe one day you will be the nunmber one. ;)</p></label>
					</td>
				</tr>
			</table>
		</fieldset>
	</form>
</div>



<div id="dialog-login" title="Login">
	<form>
		<fieldset>
			<table>
				<tr>
					<td>
						<label for="login-login">Login:</label>
					</td>
					<td>
						<input type="text" id="login-email" value="" class="text ui-widget-content ui-corner-all" /><br/>
					</td>
				</tr>
				<tr>
					<td>
						<label for="login-password">Password:</label>
					</td>
					<td>
						<input type="password" id="login-password" value="" class="text ui-widget-content ui-corner-all" /><br/>
					</td>
				</tr>
			</table>
		</fieldset>
	</form>
</div>




<div id="dialog-signup" title="Sign Up">
	<p id="signup-tips" class="validateTips">All form fields are required.</p>
	<form>
		<fieldset>
			<table>
				<tr>
					<td>
						<label for="signup-email">E-Mail:</label>
					</td>
					<td>
						<input type="text" id="signup-email" value="" class="text ui-widget-content ui-corner-all" />
					</td>
				</tr>
				<tr>
					<td>
						<label for="signup-name">Full name:</label>
					</td>
					<td>	
						<input type="text" id="signup-name" class="text ui-widget-content ui-corner-all" />
					</td>
				</tr>
				<tr>
				<td>
					<label for="signup-username">Username:</label>
				</td>
				<td>	
					<input type="text" id="signup-username" class="text ui-widget-content ui-corner-all" />
				</td>
			</tr>
				<tr>
					<td>
						<label for="signup-password">Password:</label>
					</td>
					<td>
						<input type="password" id="signup-password" value="" class="text ui-widget-content ui-corner-all" />
					</td>
				</tr>
				<tr>
					<td>
						<label for="signup-passwordRepeat">Password (Repeat):</label>
					</td>
					<td>
						<input type="password" id="signup-passwordRepeat" value="" class="text ui-widget-content ui-corner-all" />
					</td>
				</tr>
			</table>
		</fieldset>
	</form>
</div>

<div id="login-notfound" title="Not registred">
        <label for="first">E-mail not registred!</label>
</div>

<div id="login-unauthorized" title="Incorrect Password">
        <label for="first">The Password is not correct!<p> Please try again..</p></label>
</div>

<div id="register-success" title="Sucess">
        <label for="first">Registration was successfull! Go back and login with your new account.</label>
</div>

<div id="update-success" title="Sucess">
        <label for="first">Profile successfully changed!</label>
</div>

<div id="update-error" title="Not Modified">
        <label for="first"><p>Profile could not be modified!</p><p>All entries already exist. Please try new ones.</p></label>
</div>

<div id="delete-success" title="Profile deleted">
        <label for="first">Your profile has been deleted!</label>
</div>

<div id="dialog-editUser" title="Edit my profile">
	<p id="editUser-tips" class="validateTips">All form fields are required.</p>
	<form>
		<fieldset>
			<table>
				<tr>
					<td>
					<label for="update-username">Username:</label>
				</td>
				<td>	
					<input type="text" id="update-username" class="text ui-widget-content ui-corner-all" />
				</td>
			</tr>
			<tr>
				<td>
					<label for="update-password">Old Password:</label>
				</td>
				<td>
					<input type="password" id="update-password" value="" class="text ui-widget-content ui-corner-all" />
				</td>
			</tr>
			<tr>
				<td>
					<label for="update-passwordNew">New Password:</label>
				</td>
				<td>
					<input type="password" id="update-passwordNew" value="" class="text ui-widget-content ui-corner-all" />
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</div>

<div id="dialog-deleteUser" title="Delete my profile">
	<p id="editUser-tips" class="validateTips"><span style="color:#FF0000">WARNING: Deleting your profile is irrevocable!</span></p>
	<form>
		<fieldset>
			<table>
			<tr>
				<td>
					<label for="delete-password">Password:</label>
				</td>
				<td>
					<input type="password" id="delete-password" value="" class="text ui-widget-content ui-corner-all" />
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</div>

<div id="dialog-about" title="About">
<p id="about" class="about"><b>About Us:</b></p>
	<form>
		<fieldset>
			<table>
				<tr>
					<td>
						<label for="help2"><p>We are a team of two developers who are going to create one of your favorite games!</p><p> Please let us know if you have some suggestions for improvements.</p></label>
					</td>
				</tr>
			</table>
		</fieldset>
	</form>
</div>


</body>
</html>
